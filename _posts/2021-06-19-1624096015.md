---
title: java调用Jpython
categories: 
tags: java jython python import 脚本 file
---
### Java调用jython

博客地址http://blog.csdn.net/anbo724/article/details/6624000

  

需要在Java Jvm 进程内调用Python脚本。下了Jython练练手，脚本语言看着真别扭啊。

前提：

1\. sun-jre1.6, jython 2.5

2\. 在官网下下个jython_installer-2.5.0.jar，一路next, 在 /jython-install-
path/里有个jython.jar, 把这个jython.jar import 进Java Project 里边。

python代码: fibo.py

**[python]** view plain copy

  1. # Fibonacci numbers module
  2.   3. def fib(n): # write Fibonacci series up to n
  4. a, b = 0, 1
  5. while b < n: 
  6. print b, 
  7. a, b = b, a+b 
  8.   9. def fib2(n): # return Fibonacci series up to n
  10. result = [] 
  11. a, b = 0, 1
  12. while b < n: 
  13. result.append(b) 
  14. a, b = b, a+b 
  15. return result 

  
Java 代码：TestJython.java

**[java]** view plain copy

  1. import org.python.core.PyException; 
  2. import org.python.core.PyFile; 
  3. import org.python.core.PyObject; 
  4. import org.python.core.PyString; 
  5. import org.python.util.PythonInterpreter; 
  6.   7. public class TestJython { 
  8.   9. /**
  10. * 关注Jython这几个方面的内容：
  11. * 1. 怎样从某个指定的路径import一个Jython模块？
  12. * 2. 怎样调用模块里的方法？
  13. * 3. java 与 jython 间的参数应该怎样进行传递？
  14. * 
  15. * @param args
  16. * @throws PyException
  17. */
  18. public static void main(String []args)throws PyException 
  19. { 
  20. PythonInterpreter interp = new PythonInterpreter(); 
  21.   22. // 1. 
  23. // 引入系统模块，并将[./pythonsrc]加入模块搜索路径中去。
  24. interp.exec("import sys"); 
  25. interp.exec("sys.path.append('./pythonsrc')"); 
  26.   27. // 2. 引入 fibo, 执行fibo.fib(100), ok
  28. interp.exec("import fibo"); 
  29. interp.exec("fibo.fib(100)"); 
  30.   31. // 3. 在Java 程序中获得 python内置类型的变量值。
  32. String text = "'this is a bad day'"; 
  33. interp.exec("x = " \+ text + " + '!!!'"); 
  34. interp.exec("print x"); 
  35. PyObject object = interp.get("x"); 
  36. PyString xString = object.__str__(); 
  37. String outX = xString.asString(); 
  38.   39. interp.exec("_file = open('/home/fore/work/OaasSearch/search/oaas_search/workspace/oaas-search0.1/pythonsrc/fibo.py')"); 
  40. object = interp.get("_file"); 
  41. PyFile file = (PyFile)object; 
  42. PyString content = file.read(100); 
  43. System.out.println(content); 
  44.   45. interp.exec("array = _file.read(100)"); 
  46. String array = interp.get("array").asString(); 
  47. System.out.println(array); 
  48.   49. interp.exec("_file.close()"); 
  50. file.close(); 
  51. } 
  52. } 

  
这样就可以完成调用了，代码还没有完全测试，等测试通过了 会进行进一步调整！

  

