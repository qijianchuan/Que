---
title: Jython 与 Java
categories: Java菜鸟 工程实践 Python
tags: jython java import string python object
---
这两天因为工作需要，需要在Java Jvm
进程内调用Python脚本。下了Jython练练手，脚本语言看着真别扭啊。若干年前写自动化测试工具时也用过python一小阵子，但基本忘光光了。好了，直奔主题。

前提：

1\. sun-jre1.6, jython 2.5

2\. 在官网下下个jython_installer-2.5.0.jar，一路next, 在 /jython-install-
path/里有个jython.jar, 把这个jython.jar import 进Java Project 里边。

代码：

fibo.py

\--------------------------------------------------------------------------------------------

# Fibonacci numbers module  
  
def fib(n): # write Fibonacci series up to n  
a, b = 0, 1  
while b < n:  
print b,  
a, b = b, a+b  
  
def fib2(n): # return Fibonacci series up to n  
result = []  
a, b = 0, 1  
while b < n:  
result.append(b)  
a, b = b, a+b  
return result

\------------------------------------------------------------------------------------------------------

TestJython.java

\----------------------------------------------------------------------------------------------------------

package platform.oaas.******.other.test;  
  
import org.python.core.PyException;  
import org.python.core.PyFile;  
import org.python.core.PyObject;  
import org.python.core.PyString;  
import org.python.util.PythonInterpreter;  
  
public class TestJython {  
  
/**  
* 关注Jython这几个方面的内容：  
* 1. 怎样从某个指定的路径import一个Jython模块？  
* 2. 怎样调用模块里的方法？  
* 3. java 与 jython 间的参数应该怎样进行传递？  
*   
* @param args  
* @throws PyException  
*/  
public static void main(String []args)throws PyException  
{  
PythonInterpreter interp = new PythonInterpreter();  
  
// 1.  
// 引入系统模块，并将[./pythonsrc]加入模块搜索路径中去。  
interp.exec("import sys");  
interp.exec("sys.path.append('./pythonsrc')");  
  
// 2. 引入 fibo, 执行fibo.fib(100), ok  
interp.exec("import fibo");  
interp.exec("fibo.fib(100)");  
  
// 3. 在Java 程序中获得 python内置类型的变量值。  
String text = "'this is a bad day'";  
interp.exec("x = " + text + " + '!!!'");  
interp.exec("print x");  
PyObject object = interp.get("x");  
PyString xString = object.__str__();  
String outX = xString.asString();  
  
interp.exec("_file =
open('/home/fore/work/OaasSearch/search/oaas_search/workspace/oaas-
search0.1/pythonsrc/fibo.py')");  
object = interp.get("_file");  
PyFile file = (PyFile)object;  
PyString content = file.read(100);  
System.out.println(content);  
  
interp.exec("array = _file.read(100)");  
String array = interp.get("array").asString();  
System.out.println(array);  
  
interp.exec("_file.close()");  
file.close();  
}  
}  
\------------------------------------------------------------------------------------------------------------------------

