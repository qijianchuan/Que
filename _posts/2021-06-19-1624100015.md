---
title: fedora下RTL8111/8168B有线网卡的驱动安装
categories: 
tags: 
---
今天回校，发现手提电脑不能用YHA3C上网了

经过折腾，发现是网卡驱动没装好我的机子是lenovo的V480

ifconfig出来的是这样：

    
    
    lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 16436
            inet 127.0.0.1  netmask 255.0.0.0
            inet6 ::1  prefixlen 128  scopeid 0x10<host>
            loop  txqueuelen 0  (Local Loopback)
            RX packets 10  bytes 1076 (1.0 KiB)
            RX errors 0  dropped 0  overruns 0  frame 0
            TX packets 10  bytes 1076 (1.0 KiB)
            TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
    
    p3p1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
            inet 172.18.70.236  netmask 255.255.252.0  broadcast 172.18.71.255
            inet6 fe80::f2de:f1ff:fee0:c3df  prefixlen 64  scopeid 0x20<link>
            inet6 2001:250:3002:4500:f2de:f1ff:fee0:c3df  prefixlen 64  scopeid 0x0<global>
            ether f0:de:f1:e0:c3:df  txqueuelen 1000  (Ethernet)
            RX packets 397905  bytes 92605806 (88.3 MiB)
            RX errors 0  dropped 0  overruns 0  frame 0
            TX packets 45815  bytes 4059622 (3.8 MiB)
            TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
            device interrupt 46  base 0x2000  

看到这里的我都觉得有点奇怪，为什么ethernet叫p3p1而不叫eth0呢？

算了，不管，先继续做下去

在这里感谢网上的大神给我的灵感：

http://forum.ubuntu.org.cn/viewtopic.php?t=187659

http://www.foxhop.net/realtek-dropping-packets-on-linux-ubuntu-and-fedora

1.lsmod|grep 816

lspci -v

看输出提示，在这一步会找到一个驱动8169，但是却不是我们想要的,所以我们的思路便是移除这个驱动并且重新安装

2.移除8169驱动

rmmod r8169

echo "blacklist r8169" >> /etc/modprobe.d/blacklist.conf

mv /lib/modules/内核版本/kernel/drivers/net/ethernet/realtek/r8169.ko
~/r8169.ko.backup

3.安装8168驱动

下载并解压：http://www.realtek.com.tw/downloads/downloadsView.aspx?Langid=1&PNid=13&PFid=5&Level=5&Conn=4&DownTypeID=3&GetDown=false#2

进入目录（r8168-8.035.00）后安装驱动：

make clean modules

make install

（如果没有makefile，则看看有没autorun.sh，执行./autorun.sh）

解决依赖问题：

depmod -a

insmod ./src/r8168.ko

4.重启

5。如果重启还不成功则重做前面的步骤并试试:

update-initramfs -u

转载于:https://www.cnblogs.com/apir8181/archive/2013/02/25/2932803.html

