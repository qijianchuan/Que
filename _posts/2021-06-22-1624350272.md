---
title: Flume之——监控
categories: 精通大数据系列
tags: Flume
---
转载请注明出处：https://blog.csdn.net/l1028386804/article/details/98127601

### Http监控

这种监控方式比较简单，只需要在启动Flume命令中加入Http监控配置，如下命令所示：

    
    
    flume-ng agent -c /usr/local/flume-1.9.0/conf -f /usr/local/flume-1.9.0/conf/flume-xxxxx.conf.properties -n myagent -Dflume.root.logger=INFO,console  -Dflume.monitoring.type=http -Dflume.monitoring.port=10000

命令配置说明：

  * -Dflume.monitoring.type=http：表示使用http的方式监控Flume。
  * -Dflume.monitoring.port=10000：表示监控程序监听10000端口。

此时，只需要访问http://ip:10000/metrics即可查询Flume的监控数据。比如访问：http://192.168.175.100:10000/metrics

得到的监控数据如下：

    
    
    {"CHANNEL.c1":{"ChannelCapacity":"1000","ChannelFillPercentage":"0.0","Type":"CHANNEL","EventTakeSuccessCount":"95","ChannelSize":"0","EventTakeAttemptCount":"96","StartTime":"1564675459500","EventPutSuccessCount":"95","EventPutAttemptCount":"95","StopTime":"0"}}

### ganglia监控

这类监控方式需要先安装ganglia，然后启动ganglia服务，然后再启动flume的时候加上使用ganglia的监控配置，例如：

    
    
    flume-ng agent -c /usr/local/flume-1.9.0/conf -f /usr/local/flume-1.9.0/conf/flume-xxxxx.conf.properties -n myagent -Dflume.root.logger=INFO,console -Dflume.monitoring.type=ganglia -Dflume.monitoring.hosts=ip:port

命令参数说明：

  * -Dflume.monitoring.type=ganglia：表示使用ganglia监控Flume。
  * -Dflume.monitoring.hosts=ip:port：设置ganglia监控Flume时监听的IP和端口号。

