---
title: 实测ubuntu18.04源码安装mysql8.0.14,也适用于centos
categories: # archlinux
tags: linux ubuntu mysql
---
安装说明：

以下步骤以root账户执行（或者在步骤前面加sudo也行）

一般把源码包放在 /usr/local/src/ ，步骤也是在此目录下操作

一般把安装目录设置为 /usr/lcoal/mysql

也适用于centos，把第二步apt换成yum就行

第一步、准备工作

1、下载源码包(下载带boost的源码包，题外话：8.0.15的源码报错，一直没安装成功，此处下载8.0.14 。8.0版本安装包大约在111M左右)

https://cdn.mysql.com//Downloads/MySQL-8.0/mysql-boost-8.0.14.tar.gz

2、解压源码包

tar -zxvf mysql-boost-8.0.14.tar.gz

3、进入解压包

cd mysql-8.0.14

mkdir build

cd build

4、准备mysql用户

groupadd mysql

useradd mysql -g mysql -s /sbin/nologin -M

  
第二步、安装依赖包

apt install -y gcc cmake libncurses5-dev

第三步、cmake 一下（由于版本不同、环境不同，依赖包默认的数量也不同。如有提示缺少依赖包，请返回上一步添加依赖包）

cmake .. \  
-DCMAKE_INSTALL_PREFIX=/usr/local/mysql \  
-DMYSQL_DATADIR=/usr/local/mysql/data \  
-DSYSCONFDIR=/etc \  
-DMYSQL_USER=mysql \  
-DMYSQL_TCP_PORT=3306 \  
-DDEFAULT_CHARSET=utf8mb4 \  
-DDEFAULT_COLLATION=utf8mb4_general_ci \  
-DWITH_SSL:STRING=bundled \  
-DWITH_ZLIB:STRING=bundled \  
-DWITH_BOOST=../boost

  
第四步、make 一下

make -j8 #此步过程较长，请耐心等待

make install

第五步、编辑配置文件

说明：mysql的配置文件默认加载位置为 /etc/my.cnf /etc/mysql/my.cnf ~/.my.cnf, 如果没有就自行创建

vim /etc/my.cnf

##### 书写配置my.cnf开始 #####

[mysqld]

# 端口号  
port=3306  
basedir=/usr/local/mysql

log-error=/var/log/mysql.err

# 数据目录，可更改  
datadir=/usr/local/mysql/data

# mysql.sock文件位置不要改，可能会出现找不到的情况  
socket=/tmp/mysql.sock

# 默认字符集

character-set-server=utf8mb4  
collation-server=utf8mb4_general_ci

[mysqld_safe]

# 错误日志，放在专门的日志目录，放在其他目需要录修改权限  
log-error=/var/log/mysql.err

##### 书写配置my.cnf结束 #####

第六步 、进入安装目录

cd /usr/local/mysql

第七步、初始化mysql

bin/mysqld --initialize-insecure --user=mysql --basedir=/usr/local/mysql
--datadir=/usr/local/mysql/data

chown -R mysql:mysql /usr/local/mysql/data

第八步、设置开机自启

cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysql  
chmod +x /etc/init.d/mysql

第九步、启动mysql

/etc/init.d/mysql start  
第十步、设置root默认密码并创建软连接

bin/mysqladmin -u root password 'root'  
ln -sf bin/mysql /usr/bin/mysql  
安装完毕

