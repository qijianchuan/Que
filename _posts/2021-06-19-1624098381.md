---
title: mysql8.0源码安装
categories: mysql
tags: mysql mysql安装 mysql8 mysql源码安装 源码安装
---
本次安装系统环境为centos7.4，root用户  
一、编译环境准备

    
    
    yum -y install wget  cmake gcc gcc-c++ ncurses  ncurses-devel  libaio-devel  openssl openssl-devel

二、编译

    
    
    wget https://cdn.mysql.com//Downloads/MySQL-8.0/mysql-boost-8.0.11.tar.gz
    mkdir -p /usr/local/mysql
    mkdir -p /data/mysql
    tar -zxf mysql-boost-8.0.11.tar.gz -C /usr/local
    cd /usr/local/mysql-8.0.11
    cmake . -DCMAKE_INSTALL_PREFIX=/usr/local/mysql -DMYSQL_DATADIR=/usr/local/mysql/data -DSYSCONFDIR=/etc -DMYSQL_TCP_PORT=3306 -DWITH_BOOST=/usr/local/mysql-8.0.11/boost

如果用云服务器，有可能内存不足，导致出错，增加swap区再进行编译

    
    
    dd if=/dev/zero of=/swapfile bs=16M count=16
    mkswap /swapfile
    swapon /swapfile
    make  && make install

编译过程时间较长

三、配置mysql

    
    
    bin/mysqld --initialize --user=root --datadir=/data/mysql/
    bin/mysql_ssl_rsa_setup

制作配置文件，mysql启动不指定配置文件路径的时候配置文件路径为/etc/my.cnf

    
    
    vi /etc/my.cnf
    port=3306
    datadir=/data/mysql/
    log-error=/usr/local/mysql/log/mysql-err.log
    user=root
    
    skip-grant-tables  #此项是为了装好后免登陆修改密码使用
    
    default_authentication_plugin=mysql_native_password 
    
    [client]
    socket=/tmp/mysql.sock

启动

    
    
    bin/mysqld_safe --user=root &

四、重置密码  
重置密码

    
    
    mysql -u root -p 1

到输入密码的时候直接回车

    
    
    use mysql

先清空root的密码

    
    
    mysql>update user set authentication_string = '' where user = 'root';
    quit1

删掉my.cnf里的句

    
    
    skip-grant-tables1

重启mysql

    
    
    /etc/init.d/mysqld restart1

然后再进去，还是到输入密码的时候直接回车,已经将密码置空了

    
    
    mysql -u root -p

修改密码，这里注意一下，密码强度是有要求的，这也是MYSQL8的特性

    
    
    mysql>ALTER USER 'root'@'localhost' IDENTIFIED BY 'MyNewPass4!'; 
    mysql>use mysql; 

修改登录IP限制，不修改就只能本地登录

    
    
    mysql>update user set host = '%' where user = 'root';

