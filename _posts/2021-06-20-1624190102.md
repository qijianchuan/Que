---
title: Android--图片轮播（banner）
categories: Android Android开发
tags: banner 图片轮播 Android
---
推荐第三方框架banner，地址：https://github.com/youth5201314/banner

## 使用步骤

Step 1.依赖banner

Gradle

    
    
    dependencies{
        compile 'com.youth.banner:banner:1.4.10'  //最新版本
    }

或者引用本地lib

    
    
    compile project(':banner')

Step 2.添加权限到你的 AndroidManifest.xml

    
    
    <!-- if you want to load images from the internet -->
    <uses-permission android:name="android.permission.INTERNET" /> 
    
    <!-- if you want to load images from a file OR from the internet -->
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />

Step 3.在布局文件中添加Banner，可以设置自定义属性

！！！此步骤可以省略，直接在Activity或者Fragment中new Banner();

    
    
    <com.youth.banner.Banner
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:id="@+id/banner"
        android:layout_width="match_parent"
        android:layout_height="高度自己设置" />

Step 4.重写图片加载器

    
    
    public class GlideImageLoader extends ImageLoader {
        @Override
        public void displayImage(Context context, Object path, ImageView imageView) {
            /**
              注意：
              1.图片加载器由自己选择，这里不限制，只是提供几种使用方法
              2.返回的图片路径为Object类型，由于不能确定你到底使用的那种图片加载器，
              传输的到的是什么格式，那么这种就使用Object接收和返回，你只需要强转成你传输的类型就行，
              切记不要胡乱强转！
             */
            eg：
            
            //Glide 加载图片简单用法
            Glide.with(context).load(path).into(imageView);
    
            //Picasso 加载图片简单用法
            Picasso.with(context).load(path).into(imageView);
            
            //用fresco加载图片简单用法，记得要写下面的createImageView方法
            Uri uri = Uri.parse((String) path);
            imageView.setImageURI(uri);
        }
        
        //提供createImageView 方法，如果不用可以不重写这个方法，主要是方便自定义ImageView的创建
        @Override
        public ImageView createImageView(Context context) {
            //使用fresco，需要创建它提供的ImageView，当然你也可以用自己自定义的具有图片加载功能的ImageView
            SimpleDraweeView simpleDraweeView=new SimpleDraweeView(context);
            return simpleDraweeView;
        }
    }

Step 5.在Activity或者Fragment中配置Banner

  * 注意！start()方法必须放到最后执行，点击事件请放到start()前，每次都提交问题问为什么点击没有反应？需要轮播一圈才能点击？点击第一个怎么返回1？麻烦仔细阅读文档。

    
    
    --------------------------简单使用-------------------------------
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Banner banner = (Banner) findViewById(R.id.banner);
        //设置图片加载器
        banner.setImageLoader(new GlideImageLoader());
        //设置图片集合
        banner.setImages(images);
        //banner设置方法全部调用完毕时最后调用
        banner.start();
    }
    --------------------------详细使用-------------------------------
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Banner banner = (Banner) findViewById(R.id.banner);
        //设置banner样式
        banner.setBannerStyle(BannerConfig.CIRCLE_INDICATOR_TITLE);
        //设置图片加载器
        banner.setImageLoader(new GlideImageLoader());
        //设置图片集合
        banner.setImages(images);
        //设置banner动画效果
        banner.setBannerAnimation(Transformer.DepthPage);
        //设置标题集合（当banner样式有显示title时）
        banner.setBannerTitles(titles);
        //设置自动轮播，默认为true
        banner.isAutoPlay(true);
        //设置轮播时间
        banner.setDelayTime(1500);
        //设置指示器位置（当banner模式中有指示器时）
        banner.setIndicatorGravity(BannerConfig.CENTER);
        //banner设置方法全部调用完毕时最后调用
        banner.start();
    }
    -----------------当然如果你想偷下懒也可以这么用--------------------
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Banner banner = (Banner) findViewById(R.id.banner);
        banner.setImages(images).setImageLoader(new GlideImageLoader()).start();
    }

Step 6.（可选）增加体验

    
    
    //如果你需要考虑更好的体验，可以这么操作
    @Override
    protected void onStart() {
        super.onStart();
        //开始轮播
        banner.startAutoPlay();
    }
    
    @Override
    protected void onStop() {
        super.onStop();
        //结束轮播
        banner.stopAutoPlay();
    }

## 混淆代码

    
    
    # glide 的混淆代码
    -keep public class * implements com.bumptech.glide.module.GlideModule
    -keep public enum com.bumptech.glide.load.resource.bitmap.ImageHeaderParser$** {
      **[] $VALUES;
      public *;
    }
    # banner 的混淆代码
    -keep class com.youth.banner.** {
        *;
     }

Demo

MainActivity.java

    
    
    import android.app.Activity;
    import android.content.Context;
    import android.os.Bundle;
    import android.widget.ImageView;
    import android.widget.Toast;
    
    import com.bumptech.glide.Glide;
    import com.youth.banner.Banner;
    import com.youth.banner.BannerConfig;
    import com.youth.banner.listener.OnBannerListener;
    import com.youth.banner.loader.ImageLoader;
    import java.util.ArrayList;
    
    public class MainActivity extends Activity {
    
        private Banner mBanner;
        private ArrayList<String> images;
        private ArrayList<String> imageTitle;
    
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            mBanner = findViewById(R.id.banner);
    
            //初始化数据
            initData();
            //初始化view
            initView();
    
        }
    
        private void initView() {
            mBanner = findViewById(R.id.banner);
            //设置样式,默认为:Banner.NOT_INDICATOR(不显示指示器和标题)
            //可选样式如下:
            //1. Banner.CIRCLE_INDICATOR    显示圆形指示器
            //2. Banner.NUM_INDICATOR   显示数字指示器
            //3. Banner.NUM_INDICATOR_TITLE 显示数字指示器和标题
            //4. Banner.CIRCLE_INDICATOR_TITLE  显示圆形指示器和标题
            //设置banner样式
            mBanner.setBannerStyle(BannerConfig.CIRCLE_INDICATOR_TITLE);
            //设置图片加载器
            mBanner.setImageLoader(new GlideImageLoader());
            //设置标题集合（当banner样式有显示title时）
            mBanner.setBannerTitles(imageTitle);
            //设置轮播样式（没有标题默认为右边,有标题时默认左边）
            //可选样式:
            //Banner.LEFT   指示器居左
            //Banner.CENTER 指示器居中
            //Banner.RIGHT  指示器居右
            mBanner.setIndicatorGravity(BannerConfig.CENTER);
            //设置是否允许手动滑动轮播图
            mBanner.setViewPagerIsScroll(true);
            //设置是否自动轮播（不设置则默认自动）
            mBanner.isAutoPlay(true);
            //设置轮播图片间隔时间（不设置默认为2000）
            mBanner.setDelayTime(1500);
            //设置图片资源:可选图片网址/资源文件，默认用Glide加载,也可自定义图片的加载框架
            //所有设置参数方法都放在此方法之前执行
            mBanner.setIndicatorGravity(BannerConfig.CENTER);
            mBanner.setImages(images)
                    .setOnBannerListener(new OnBannerListener() {
                        @Override
                        public void OnBannerClick(int position) {
                            Toast.makeText(MainActivity.this, "你点了第" + (position + 1) + "张轮播图", Toast.LENGTH_SHORT).show();
                        }
                    })
                    .start();
    
        }
    
        private void initData() {
            //设置图片资源:url或本地资源
            images = new ArrayList<>();
            images.add("http://img.zcool.cn/community/0166c756e1427432f875520f7cc838.jpg");
            images.add("http://img.zcool.cn/community/018fdb56e1428632f875520f7b67cb.jpg");
            images.add("http://img.zcool.cn/community/01c8dc56e1428e6ac72531cbaa5f2c.jpg");
            images.add("http://img.zcool.cn/community/01fda356640b706ac725b2c8b99b08.jpg");
            images.add("http://img.zcool.cn/community/01fd2756e142716ac72531cbf8bbbf.jpg");
            images.add("http://img.zcool.cn/community/0114a856640b6d32f87545731c076a.jpg");
            //设置图片标题:自动对应
            imageTitle = new ArrayList<>();
            imageTitle.add("十大星级品牌联盟，全场2折起");
            imageTitle.add("嗨购5折不要停");
            imageTitle.add("双12趁现在");
            imageTitle.add("嗨购5折不要停，12.12趁现在");
            imageTitle.add("实打实大优惠");
            imageTitle.add("买到就是赚到");
    
        }
        /**
         * 网络加载图片
         * 使用了Glide图片加载框架
         */
        public class GlideImageLoader extends ImageLoader {
            @Override
            public void displayImage(Context context, Object path, ImageView imageView) {
                Glide.with(context)
                        .load((String) path)
                        .into(imageView);
            }
    
        }
    
        @Override
        protected void onResume() {
            super.onResume();
    
        }
    
        @Override
        protected void onStop() {
            super.onStop();
    
        }
    
        @Override
        protected void onDestroy() {
            super.onDestroy();
    
        }
    }

_main_layout.xml_

    
    
    <com.youth.banner.Banner   
     xmlns:app="http://schemas.android.com/apk/res-auto"  
      android:id="@+id/banner"    
      android:layout_width="match_parent" 
      android:layout_height="300dp" />

