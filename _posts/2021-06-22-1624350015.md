---
title: Netty之——基于Netty5.0高级案例NettyWebsocket
categories: 精通Netty系列
tags: Netty java
---
今天，是年后第一次发表博文，今天就给大家带来一篇有关netty的文章吧，好了，我们直接进入主题。

### **一、前言介绍**

本案例主要介绍如何使用Netty开发websocket。

### **二、环境需求**

1、jdk1.7

2、Eclipse

3、Netty5.0

4、支持websocket的浏览器[火狐]

### **三、工程截图**

![](data:image/png;base64,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)

### **四、代码部分**

**1、服务端**

**Global.java**

    
    
    package com.itstack.netty.common;
    import io.netty.channel.group.ChannelGroup;
    import io.netty.channel.group.DefaultChannelGroup;
    import io.netty.util.concurrent.GlobalEventExecutor;
    public class Global {
    	public static ChannelGroup group = new DefaultChannelGroup(GlobalEventExecutor.INSTANCE);
    	
    } 

**ChildChannelHandler.java**

    
    
    package com.itstack.netty.websocket;
    import io.netty.channel.ChannelInitializer;
    import io.netty.channel.socket.SocketChannel;
    import io.netty.handler.codec.http.HttpObjectAggregator;
    import io.netty.handler.codec.http.HttpServerCodec;
    import io.netty.handler.stream.ChunkedWriteHandler;
    public class ChildChannelHandler extends ChannelInitializer<SocketChannel>{
    	@Override
    	protected void initChannel(SocketChannel e) throws Exception {
    		
    		e.pipeline().addLast("http-codec",new HttpServerCodec());
    		e.pipeline().addLast("aggregator",new HttpObjectAggregator(65536));
    		e.pipeline().addLast("http-chunked",new ChunkedWriteHandler());
    		e.pipeline().addLast("handler",new MyWebSocketServerHandler());
    	}
    } 

**MyWebSocketServerHandler.java**

    
    
    package com.itstack.netty.websocket;
    import java.util.Date;
    import java.util.logging.Level;
    import java.util.logging.Logger;
    import com.itstack.netty.common.Global;
    import io.netty.buffer.ByteBuf;
    import io.netty.buffer.Unpooled;
    import io.netty.channel.ChannelFuture;
    import io.netty.channel.ChannelFutureListener;
    import io.netty.channel.ChannelHandlerContext;
    import io.netty.channel.SimpleChannelInboundHandler;
    import io.netty.handler.codec.http.DefaultFullHttpRequest;
    import io.netty.handler.codec.http.DefaultFullHttpResponse;
    import io.netty.handler.codec.http.FullHttpRequest;
    import io.netty.handler.codec.http.HttpResponseStatus;
    import io.netty.handler.codec.http.HttpVersion;
    import io.netty.handler.codec.http.websocketx.CloseWebSocketFrame;
    import io.netty.handler.codec.http.websocketx.PingWebSocketFrame;
    import io.netty.handler.codec.http.websocketx.PongWebSocketFrame;
    import io.netty.handler.codec.http.websocketx.TextWebSocketFrame;
    import io.netty.handler.codec.http.websocketx.WebSocketFrame;
    import io.netty.handler.codec.http.websocketx.WebSocketServerHandshaker;
    import io.netty.handler.codec.http.websocketx.WebSocketServerHandshakerFactory;
    import io.netty.util.CharsetUtil;
    public class MyWebSocketServerHandler extends
            SimpleChannelInboundHandler<Object> {
        private static final Logger logger = Logger
                .getLogger(WebSocketServerHandshaker.class.getName());
        private WebSocketServerHandshaker handshaker;
        @Override
        public void channelActive(ChannelHandlerContext ctx) throws Exception {
            // 添加
            Global.group.add(ctx.channel());
            System.out.println("客户端与服务端连接开启");
        }
        @Override
        public void channelInactive(ChannelHandlerContext ctx) throws Exception {
            // 移除
            Global.group.remove(ctx.channel());
            System.out.println("客户端与服务端连接关闭");
        }
        @Override
        protected void messageReceived(ChannelHandlerContext ctx, Object msg)
                throws Exception {
            if (msg instanceof FullHttpRequest) {
                handleHttpRequest(ctx, ((FullHttpRequest) msg));
            } else if (msg instanceof WebSocketFrame) {
                handlerWebSocketFrame(ctx, (WebSocketFrame) msg);
            }
        }
        @Override
        public void channelReadComplete(ChannelHandlerContext ctx) throws Exception {
            ctx.flush();
        }
        private void handlerWebSocketFrame(ChannelHandlerContext ctx,
                WebSocketFrame frame) {
            // 判断是否关闭链路的指令
            if (frame instanceof CloseWebSocketFrame) {
                handshaker.close(ctx.channel(), (CloseWebSocketFrame) frame
                        .retain());
            }
            // 判断是否ping消息
            if (frame instanceof PingWebSocketFrame) {
                ctx.channel().write(
                        new PongWebSocketFrame(frame.content().retain()));
                return;
            }
            // 本例程仅支持文本消息，不支持二进制消息
            if (!(frame instanceof TextWebSocketFrame)) {
                System.out.println("本例程仅支持文本消息，不支持二进制消息");
                throw new UnsupportedOperationException(String.format(
                        "%s frame types not supported", frame.getClass().getName()));
            }
            // 返回应答消息
            String request = ((TextWebSocketFrame) frame).text();
            System.out.println("服务端收到：" + request);
            if (logger.isLoggable(Level.FINE)) {
                logger
                        .fine(String.format("%s received %s", ctx.channel(),
                                request));
            }
            TextWebSocketFrame tws = new TextWebSocketFrame(new Date().toString()
                    + ctx.channel().id() + "：" + request);
            // 群发
            Global.group.writeAndFlush(tws);
            // 返回【谁发的发给谁】
            // ctx.channel().writeAndFlush(tws);
        }
        private void handleHttpRequest(ChannelHandlerContext ctx,
                FullHttpRequest req) {
            if (!req.getDecoderResult().isSuccess()
                    || (!"websocket".equals(req.headers().get("Upgrade")))) {
                sendHttpResponse(ctx, req, new DefaultFullHttpResponse(
                        HttpVersion.HTTP_1_1, HttpResponseStatus.BAD_REQUEST));
                return;
            }
            WebSocketServerHandshakerFactory wsFactory = new WebSocketServerHandshakerFactory(
                    "ws://localhost:7397/websocket", null, false);
            handshaker = wsFactory.newHandshaker(req);
            if (handshaker == null) {
                WebSocketServerHandshakerFactory
                        .sendUnsupportedWebSocketVersionResponse(ctx.channel());
            } else {
                handshaker.handshake(ctx.channel(), req);
            }
        }
        private static void sendHttpResponse(ChannelHandlerContext ctx,
                FullHttpRequest req, DefaultFullHttpResponse res) {
            // 返回应答给客户端
            if (res.getStatus().code() != 200) {
                ByteBuf buf = Unpooled.copiedBuffer(res.getStatus().toString(),
                        CharsetUtil.UTF_8);
                res.content().writeBytes(buf);
                buf.release();
            }
            // 如果是非Keep-Alive，关闭连接
            ChannelFuture f = ctx.channel().writeAndFlush(res);
            if (!isKeepAlive(req) || res.getStatus().code() != 200) {
                f.addListener(ChannelFutureListener.CLOSE);
            }
        }
        private static boolean isKeepAlive(FullHttpRequest req) {
            return false;
        }
        @Override
        public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause)
                throws Exception {
            cause.printStackTrace();
            ctx.close();
        }
    } 

**NettyServer.java**

    
    
    package com.itstack.netty.websocket;
    import io.netty.bootstrap.ServerBootstrap;
    import io.netty.channel.Channel;
    import io.netty.channel.ChannelOption;
    import io.netty.channel.EventLoopGroup;
    import io.netty.channel.nio.NioEventLoopGroup;
    import io.netty.channel.socket.nio.NioServerSocketChannel;
    public class NettyServer {
        public static void main(String[] args) {
            
            new NettyServer().run();
        }
        
        public void run(){
            
            EventLoopGroup bossGroup = new NioEventLoopGroup();
            EventLoopGroup workGroup = new NioEventLoopGroup();
            
            try {
                
                ServerBootstrap b = new ServerBootstrap();
                b.group(bossGroup, workGroup);
                b.channel(NioServerSocketChannel.class);
                b.childHandler(new ChildChannelHandler());
                
                System.out.println("服务端开启等待客户端连接 ... ...");
                
                Channel ch = b.bind(7397).sync().channel();
                
                ch.closeFuture().sync();
                
            } catch (Exception e) {
                e.printStackTrace();
            }finally{
                bossGroup.shutdownGracefully();
                workGroup.shutdownGracefully();
            }
            
        }
        
    } 

**2、客户端**

    
    
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
      <html xmlns="http://www.w3.org/1999/xhtml">
      <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <title>无标题文档</title>
      </head>
        </head>
        <script type="text/javascript">
        var socket;
        
        
        if(!window.WebSocket){
       
            window.WebSocket = window.MozWebSocket;
        }
       
        if(window.WebSocket){
            socket = new WebSocket("ws://localhost:7397/websocket");
            
            socket.onmessage = function(event){
       
                  var ta = document.getElementById('responseText');
                  ta.value += event.data+"\r\n";
            };
       
            socket.onopen = function(event){
       
                  var ta = document.getElementById('responseText');
                  ta.value = "打开WebSoket 服务正常，浏览器支持WebSoket!"+"\r\n";
                  
            };
       
            socket.onclose = function(event){
       
                  var ta = document.getElementById('responseText');
                  ta.value = "";
                  ta.value = "WebSocket 关闭"+"\r\n";
            };
        }else{
              alert("您的浏览器不支持WebSocket协议！");
        }
       
        function send(message){
          if(!window.WebSocket){return;}
          if(socket.readyState == WebSocket.OPEN){
              socket.send(message);
          }else{
              alert("WebSocket 连接没有建立成功！");
          }
          
        }
            
        </script>
        <body>
          <form onSubmit="return false;">
              <input type = "text" name="message" value="Netty The Sinper"/>
              <br/><br/>
              <input type="button" value="发送 WebSocket 请求消息" onClick="send(this.form.message.value)"/>
              <hr color="blue"/>
              <h3>服务端返回的应答消息</h3>
              <textarea id="responseText" style="width: 1024px;height: 300px;"></textarea>
          </form>
        </body>
      </html>

### **五、测试运行**

1、启动 **NettyServer**

2、启动支持websocket的浏览器，打开index.html【开启2个以上】

### 六、温馨提示

大家可以到链接http://download.csdn.net/detail/l1028386804/9753030下载完整的基于Netty5.0高级案例NettyWebsocket的源代码  

