---
title: rancher管理的k8s环境搭建svn服务
categories: 
tags: 
---
一：下载镜像  
在你的k8s环境服务器上下载svn镜像，命令：docker search
svn，此时你会看到svn的镜像列表，我选择的是stars最多的镜像garethflowers/svn-
server，将镜像重新打tag然后推送到自己的harbor库。  
二：建立pv  
在nfs服务器上建立pv卷，在rancher配置pvc  
三：拉起镜像  
使用rancher拉起镜像，端口配置为3690，外部映射根据情况定，我是在服务器新开了一个端口，然后映射出去的，我选择的是HostPort，最后配置volumes，将已经建好的pvc关联上，配置的地方只有这两处。配置volumes时，容器内路径是/var/opt/svn。

最后镜像拉起成功后，利用rancher进入容器内execute-shell，进入后的目录就是/var/opt/svn，在目录下执行svnadmin
create
repo，执行成功后你就会在该目录下找到repo，该文件夹下有passwd等相关配置文件，由于已经做了持久化，可以放心的添加用户名密码以及配置信息，重启svn
pod也不影响。

svn客户端连接方式为 svn://ip:point/repo

