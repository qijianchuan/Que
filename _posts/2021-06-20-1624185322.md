---
title: FastDFS_v5.05安装记录
categories: 大数据处理技术
tags: FastDFS 安装 fastdfs5
---
1、软件包

FastDFS_v5.05.tar.gz

libfastcommon-master.zip  

fastdfs-nginx-module_v1.16.tar.gz  

zlib-1.2.8.tar.gz  

pcre-8.12.tar.gz  

nginx-1.7.9.tar.gz  

  

2.安装部署

FastDFS_v5.05依赖libfastcommon，不再依赖libevent  

2.1、libfastcommon安装

unzip libfastcommon-master.zip -d /usr/local

cd /usr/local/libfastcommon-master

./make.sh

./make.sh install

libfastcommon.so默认安装到了/usr/lib64/libfastcommon.so，而FastDFS主程序设置的lib目录是/usr/local/lib，所以设置软连接  

ln -s /usr/lib64/libfastcommon.so /usr/local/lib/libfastcommon.so  
ln -s /usr/lib64/libfastcommon.so /usr/lib/libfastcommon.so  
ln -s /usr/lib64/libfdfsclient.so /usr/local/lib/libfdfsclient.so  
ln -s /usr/lib64/libfdfsclient.so /usr/lib/libfdfsclient.so

  

2.2、安装FastDFS

tar -zxvf FastDFS_v5.05.tar.gz -C /usr/local

cd /usr/local/FastDFS

./make.sh

./make.sh install

cd /etc/fdfs

1)、创建并修改tracker.conf、storage.conf配置文件，这里暂不介绍如何配置

2)、启动tracker、storage

fdfs_trackerd tracker.conf

fdfs_storaged storage.conf

3)、配置client.conf文件，进行上传文件测试

fdfs_test client.conf upload 文件，生成地址说明成功了。

  

2.3安装nginx插件

1）tar -zxvf fastdfs-nginx-module_v1.16.tar.gz -C /usr/local

cd fastdfs-nginx-module/src

vi config，修改如下配置

我这里原来是

CORE_INCS="$CORE_INCS /usr/local/include/fastdfs
/usr/local/include/fastcommon/"  

改成

CORE_INCS="$CORE_INCS /usr/include/fastdfs /usr/include/fastcommon/"  

这个是很重要的，不然在nginx编译的时候会报错的，我看网上很多在安装nginx的fastdfs的插件报错，都是这个原因，而不是版本不匹配。

实际情况，你可以自己查看在 /usr/local/include/路径下是否有fastdfs

cp mod_fastdfs.conf /etc/fdfs

对 mod_fastdfs.conf 进行配置

2)、配置文件服务器的软连接

ln -s /home/yuqing/fastdfs/data /home/yuqing/fastdfs/data/M00
(配置文件中stoage存放数据的路径)

3）安装nginx

tar -zxvf zlib-1.2.8.tar.gz -C /usr/local

tar -zxvf pcre-8.12.tar.gz -C /usr/local  

tar -zxvf nginx-1.7.9.tar.gz

cd nginx-1.7.9

./configure --prefix=/usr/local/nginx --add-module=/usr/local/fastdfs-nginx-
module/src --with-pcre=/usr/local/pcre-8.12 --with-zlib=/usr/local/zlib-1.2.8

make

make install

cd /usr/local/nginx/conf

vi nginx.conf

添加

location /group1/M00{

root /home/yuqing/fastdfs/data;

ngx_fastdfs_module;

}

启动nginx就可以访问你测试上传的文件了。

  

以上配置经过实际操作的， 如果出现问题，一般都是配置文件没有配置好。

  

参看地址：http://www.linuxidc.com/Linux/2014-10/107659.htm

  

  

  

  

  

  

  

  

  

  

  

  

